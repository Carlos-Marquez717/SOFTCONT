{% extends 'app/base.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2Xof8k6k5toMJY9wJCAjFmecFJ3l66E4fcj" crossorigin="anonymous">

<br><br><br><br><br>
<div class="container">
  <div class="row justify-content-center">
    <div class="card bg-dark text-white col-md-8 mx-auto">
      <img src="{% static 'app/imgenes/Logo.png' %}" alt="Logo" class="img-fluid mb-4">
      <h2 class="card-header text-center">REGISTRAR PEDIDOS</h2>
      <div class="card-body">
        <!-- Contenedor para los botones -->
        <div class="d-grid gap-2">
          <!-- Enlace para ir al formulario de registrar obrero -->
          <a href="{% url 'registro_obrero' %}" class="btn btn-success">
            <i class="fas fa-plus"></i> OBRERO
          </a>
          <a href="{% url 'registro_empresa' %}" class="btn btn-success">
            <i class="fas fa-plus"></i> EMPRESA
          </a>
          <a href="{% url 'registro_material' %}" class="btn btn-success">
            <i class="fas fa-plus"></i> INSUMO
          </a>
        </div>
        <hr>
        <!-- Formulario de registrar pedido -->
        <form method="post" action="{% url 'registro_pedido' %}">
          {% csrf_token %}
          <div class="row">
            <div class="col-md-6">
              <label for="{{ form.fecha_pedido.id_for_label }}" class="form-label">Fecha de Pedido</label>
              {{ form.fecha_pedido|as_crispy_field }}
            </div>
            <div class="col-md-6">
              <label for="{{ form.obrero.id_for_label }}" class="form-label">Obrero</label>
              {{ form.obrero|as_crispy_field }}
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <label for="{{ form.material.id_for_label }}" class="form-label">Material</label>
              {{ form.material|as_crispy_field }}
            </div>
            <div class="col-md-6">
              <label for="{{ form.cantidad.id_for_label }}" class="form-label">Cantidad</label>
              {{ form.cantidad|as_crispy_field }}
            </div>
          </div>
          <button type="submit" class="btn btn-primary btn-block mt-4">Registrar</button>
        </form>
      </div>
    </div>
  </div>
</div>

<script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" integrity="sha384-rOA1PnstxnOBLzCLMcre8ybwbTmemjzdNlILg8O7z1lUkLXozs4DHonlDtnE7fpc" crossorigin="anonymous"></script>

<!-- Cargar jQuery 3.6.1 -->
<script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>

<!-- Cargar SweetAlert -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

<script>
  var successMessage = "{% if success_message %}{{ success_message }}{% endif %}";
  var errorMessage = "{% if error_message %}{{ error_message }}{% endif %}";

  if (successMessage) {
    showAlertSuccess(successMessage);
  }

  if (errorMessage) {
    showAlertError(errorMessage);
  }

  function showAlertSuccess(message) {
    Swal.fire({
      icon: 'success',
      title: 'Ã‰xito',
      text: message,
    });
  }

  function showAlertError(message) {
    Swal.fire({
      icon: 'error',
      title: 'Error',
      text: message,
    });
  }
</script>

{% endblock %}
